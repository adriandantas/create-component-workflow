apiVersion: argoproj.io/v1alpha1
kind: WorkflowTemplate
metadata:
  name: microservice-scaffolding
spec:
  inputs:
    parameters:
      - name: service-name
      - name: owner-username
      - name: team
      - name: description
      - name: template-dir
  container:
    image: adriandantas/cookiecutter:2.3.0
    args: [
      "--no-input",
      "-o", "/workspace",
      "{{ "{{inputs.parameters.template-dir}}" | quote }}",
      "serviceName={{ "{{inputs.parameters.service-name}}" | quote }}",
      "ownerUsername={{ "{{inputs.parameters.owner-username}}" | quote }}",
      "team={{ "{{inputs.parameters.team}}" | quote }}",
      "description={{ "{{inputs.parameters.description}}" | quote }}"
    ]
    volumeMounts:
      - name: workspace
        mountPath: /workspace